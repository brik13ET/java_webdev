# Лабораторная работа №2
В процессе выполнения лабораторной работы требуется реализовать нижеперечисленный функционал с использованием технологии Spring Data JPA.\
Ранее написанный код на основе Spring Data JDBC более не требуется.

## Запросы для задач
- `GET /projects/{projectId}/tasks` - возвращает все задачи;
- `GET /projects/{projectId}/tasks/{taskId}` - возвращает задачу по id задачи и id проекта;
- `POST /projects/{projectId}/tasks` - создаёт задачу;
- `PUT /projects/{projectId}/tasks/{taskId}` - обновляет задачу. Задача передаётся в теле запроса. Пример JSON тела запроса: (Для создания аналогично)
{
      "name": "task",
      "description": "desc",
      "completed": false,
      "endDate": "2020-02-02"
}

- `DELETE /projects/{projectId}/tasks/{taskId}` - удаляет задачу.
- Добавить функционал, позволяющий удалить все завершённые задачи определённого проекта. Id проекта приходит по HTTP.
## Запросы для проектов
- `GET /projects?search={search}` - возвращает все проекты с опциональной фильтрацией по тексту, встречающемуся в описании или названии проекта без учёта регистра. Если текст не передан, то возвращаются все проекты. Задачи возвращать не требуется;
- `GET /projects/{projectId}` - возвращает проект с id=projectId;
- `POST /projects` - создаёт проект (без задач);
- `PUT /projects/{projectId}` - обновляет проект;
- `DELETE /projects/{projectId}` - удаление проекта. При удалении проекта удаляются все связанные задачи.
- Добавить возможность получения информации о количестве незакрытых задач во всех проектах. Информация должна быть возвращена в виде ассоциативного массива следующего вида: Ключ - идентификатор проекта. Значение - количество незакрытых задач. Для проекта без открытых задач должен быть возвращён ноль.


При редактировании проекта задачи обновлять не надо. Также при создании проекта создавать задачи не требуется.
## Общее
Запросы добавления и обновления должны в теле ответа вернуть созданную/модифицированную сущность.\
Обработать ситуации когда сущности не найдены. Вернуть 4xx код ошибки.

Напрямую ``Entity`` классы не должны возвращаться/приниматься контроллером. Только посредством DTO / Pojo. (Смотрите методичку или 2 лекцию).
## Update
Включите трассировку запросов, генерируемых к БД, добавив следующие свойства в application.properties:

logging.level.org.hibernate.SQL=DEBUG\
logging.level.org.hibernate.type=TRACE

Проанализируйте количество и состав запросов, генерируемых вашим приложением.

Подумайте о том, являются ли эти запросы оптимальными? Возможно ли сразу обращаться к БД более оптимальными запросами?

Помните, что всегда можно написать свой запрос при помощи ```@Query``` [аннотации](https://docs.spring.io/spring-data/jpa/reference/jpa/query-methods.html#jpa.query-methods.at-query) либо посредством [Query Method](https://docs.spring.io/spring-data/jpa/reference/jpa/query-methods.html#jpa.query-methods.query-creation](https://docs.spring.io/spring-data/commons/reference/repositories/query-methods-details.html)https://docs.spring.io/spring-data/commons/reference/repositories/query-methods-details.html)
